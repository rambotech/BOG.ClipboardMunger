<?xml version="1.0"?>
<ClipboardMungerScriptContainer xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <Title>JSON-minimize</Title>
  <Description>Opposite of JSON-readble.  Removes any and all line breaks and extraneous space.


</Description>
  <Script>// Make JSON use minimal space.
// Strips out all line breaks and unnecessary whitespace outside of quoted areas.

using System;
using System.Collections.Generic;
using System.Text;
using System.Web;
using System.Windows.Forms;

public class Script : Interfaces.IClipboard
{
	public string Munge (string clipboardSource)
	{
        StringBuilder result = new StringBuilder();

        if (clipboardSource.Length &gt; 0)
        {
            bool inQuote = false;
            int EscapeBypass = 0;
            int indentLevel = 0;
            char prevChar = '\x00';
            for (int index = 0; index &lt; clipboardSource.Length; index++)
            {
            	if (EscapeBypass &gt; 0) EscapeBypass--;

                char thisChar = clipboardSource[index];
                if (!inQuote)
                {
                	// drop the whitespace characters
					if (thisChar == ' ') continue;
					if (thisChar == '\t') continue;
					if (thisChar == '\r') continue;
					if (thisChar == '\n') continue;
				}
                if (inQuote)
                {
					if (thisChar == '\\' &amp;&amp; EscapeBypass == 0) EscapeBypass = 2;
				}
				if (thisChar == '"')
				{
					if (EscapeBypass == 0)
					{
                		inQuote = !inQuote;
					}
                    result.Append(thisChar);
                    continue;
                }
                result.Append(thisChar);
            }
        }
        return result.ToString();
	}
}</Script>
  <Language>1</Language>
  <TestData>{
  "actions": [
    {
      "id": 46083455,
      "status": "completed",
      "type": "destroy",
      "started_at": "2015-03-17T13:43:59Z",
      "completed_at": "2015-03-17T13:46:21Z",
      "resource_id": 4400609,
      "resource_type": "droplet-\u85aF",
      "region": {
        "name": "New York 3",
        "slug": "nyc3",
        "sizes": [
          "512mb",
          "1gb",
          "2gb",
          "4gb",
          "8gb",
          "16gb"
        ],
        "features": [
          "private_networking",
          "backups",
          "ipv6",
          "metadata",
          "install_agent"
        ],
        "available": true
      },
      "region_slug": "nyc3"
    },
    {
      "id": 46083440,
      "status": "completed",
      "type": "power_off",
      "started_at": "2015-03-17T13:43:29Z",
      "completed_at": "2015-03-17T13:43:47Z",
      "resource_id": 4400609,
      "resource_type": "droplet",
      "region": {
        "name": "New York 3",
        "slug": "nyc3",
        "sizes": [
          "512mb",
          "1gb",
          "2gb",
          "4gb",
          "8gb",
          "16gb"
        ],
        "features": [
          "private_networking",
          "backups",
          "ipv6",
          "metadata",
          "install_agent"
        ],
        "available": true
      },
      "region_slug": "nyc3"
    },
    {
      "id": 45438230,
      "status": "completed",
      "type": "create",
      "started_at": "2015-03-09T02:36:31Z",
      "completed_at": "2015-03-09T02:37:16Z",
      "resource_id": 4400609,
      "resource_type": "droplet",
      "region": {
        "name": "New York 3",
        "slug": "nyc3",
        "sizes": [
          "512mb",
          "1gb",
          "2gb",
          "4gb",
          "8gb",
          "16gb"
        ],
        "features": [
          "private_networking",
          "backups",
          "ipv6",
          "metadata",
          "install_agent"
        ],
        "available": true
      },
      "region_slug": "nyc3"
    }
  ],
  "links": {
    
  },
  "meta": {
    "total": 3
  }
}</TestData>
  <References>
    <string>System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089</string>
    <string>System.Web, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a</string>
    <string>System.Web, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a</string>
    <string>System.Windows.Forms, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089</string>
  </References>
  <OtherReferences>
    <string>C:\apps\Clipboard Munger\Framework.DLL</string>
  </OtherReferences>
</ClipboardMungerScriptContainer>